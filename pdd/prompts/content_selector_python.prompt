<pdd-reason>Provides precise extraction of file content based on criteria like lines, AST, and regex for selective includes.</pdd-reason>

<pdd-interface>
{
  "type": "module",
  "module": {
    "functions": [
      {"name": "ContentSelector.select", "signature": "(content: str, selectors: list[str], ...)", "returns": "str"}
    ]
  }
}
</pdd-interface>

% You are an expert Python engineer. Your goal is to create a module for deterministic content selection from files.

% Role & Scope
The `content_selector` module provides precise extraction of file content based on various criteria (lines, AST, Markdown sections, regex). It is used by the PDD preprocessor to handle selective includes.

% Requirements
1. Implement `ContentSelector` class with a `select(content: str, selectors: list[str], file_path: str = None, mode: str = "full", max_tokens: int = None, overflow: str = "warn") -> str` method.
2. Support `lines` selector: `lines:N-M`, `lines:N-`, `lines:-M`, `lines:N` (1-based indices).
3. Support Python structural selection using `ast` for `.py` files:
   - `def:function_name`: Extracts the full function definition, including decorators.
   - `class:ClassName`: Extracts the full class definition, including decorators and all members.
   - `class:ClassName.method_name`: Extracts a specific method from a class.
4. Support Markdown structural selection for `.md` files:
   - `section:Heading`: Extracts all content under the specified heading until the next heading of the same or higher level.
5. Support regex pattern selection: `pattern:/regex/`.
6. Support `mode="interface"` for Python:
   - Extract only class/function/method signatures, docstrings, and type hints.
   - Remove function/method bodies (replace with `...`).
   - Exclude private members (starting with `_` but not `__init__`) by default.
7. Support `max_tokens` (use `tiktoken` if available, otherwise fallback to `len(content) // 4`) with `overflow` options:
   - `error`: Raise an error if limit exceeded.
   - `truncate`: Truncate content and append a warning.
   - `warn`: Include full content but issue a warning (default).
8. Handle multiple selectors (comma-separated string or list) by returning the union of selected parts, preserved in original file order.
9. Use `rich` for formatted error reporting and console status (e.g., warnings for truncation/overflow).
10. Ensure robust error handling for malformed selectors or missing content, providing descriptive error messages.

% Dependencies
<rich_example>
  <include>context/core/errors_example.py</include>
</rich_example>

% Deliverables
- Code: `pdd/content_selector.py`
